{% assign collection = collections['all'] %}
{% assign current_variant = product.selected_or_first_available_variant %}
{% assign featured_image = current_variant.featured_image | default: product.featured_image %}

<div class="main-border">
  <div class="top-menu">
    <div class="top-menu-right">
      <h1 class="title">{{ collection.title }}</h1>
      <div class="top-menu-right">
        <div class="button">
          <a>Back</a>
        </div>
        <div class="button">
          <a>NEXT</a>
        </div>
      </div>
    </div>
    <div class="top-menu-left">
      <div class="button">
        <a>CART</a>
      </div>
      <select id="currency" class="button">
        <option value="IDR">IDR</option>
        <option value="USD">USD</option>
      </select>
    </div>
  </div>
  <div class="bar">
    <div class="left-bar">
        <nav role="navigation">
            {%- for link in linklists.main-menu.links -%}
              <div class="widget-left-bar">
                <a href="{{ link.url }}" {% if link.active %}aria-current="page"{% endif %}>
                  <h2>{{ link.title }}</h2>
                </a>
                {%- if link.links != blank -%}
                  <ul>
                    {%- for child_link in link.links -%}
                      <li>
                        <a{% if child_link.active %}aria-current="page"{% endif %}>
                          {{ child_link.title }}
                        </a>
                        {%- if child_link.links != blank -%}
                          <ul>
                            {%- for grandchild_link in child_link.links -%}
                              <li>
                                <a href="{{ grandchild_link.url }}" {% if grandchild_link.active %}aria-current="page"{% endif %}>
                                  {{ grandchild_link.title }}
                                </a>
                              </li>
                            {%- endfor -%}
                          </ul>
                        {%- endif -%}
                      </li>
                    {%- endfor -%}
                  </ul>
                {%- endif -%}
              </div>
            {%- endfor -%}
        </nav>
    </div>
    <div class="right-bar border">
      <div class="flex">
        <div class="sub-left-bar">
          <div class="gap">
            <img src="{{ featured_image | img_url: 'large' }}" alt="{{ featured_image.alt | escape }}" id="ProductPhotoImg">
            {% for image in product.images %}
              <a href="{{ image.src | img_url: 'large' }}">
                <img src="{{ image.src | img_url: 'compact' }}" alt="{{ image.alt | escape }}" id="SubProductPhotoImg">
              </a>
            {% endfor %}
          </div>
        </div>
        <div class="sub-right-bar">
          <div class="gap">
            <h1>{{ product.title }}</h1>
            <h1>{{ current_variant.price | money }}</h1>
            <div>{{ product.description }}</div>
            <form action="/cart/add" method="post" enctype="multipart/form-data" id="AddToCartForm">
              <select name="id" id="productSelect">
                {% for variant in product.variants %}
                  {% if variant.available %}
                    <option value="{{ variant.id }}">
                      {{ variant.title }} - {{ variant.price | money_with_currency }}
                    </option>
                  {% else %}
                    <option disabled="disabled">
                      {{ variant.title }} - sold out
                    </option>
                  {% endif %}
                {% endfor %}
              </select>
              
              <label for="Quantity">quantity</label>
              <input type="number" id="Quantity" name="quantity" value="1" min="1">
              <button type="submit" name="add" id="AddToCart">Add to cart</button>
            </form>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>