{% assign collection = collections['all'] %}
{% assign current_variant = product.selected_or_first_available_variant %}
{% assign featured_image = current_variant.featured_image | default: product.featured_image %}

<img class="product-single__logo" src="{{ 'logo2.jpg' | asset_img_url: '200x' }}">

<div class="gap-main-border">
  <div class="main-border">
    <div class="top-menu">
      <div class="top-menu-right">
        <h1 class="title">{{ collection.title }}
        </h1>
      </div>
      <div class="top-menu-left">
        <div class="top-menu-content">
          <a href="{{ paginate.previous.url }}">
            <div class="button">BACK</div>
          </a>
          <a href="{{ paginate.next.url }}">
            <div class="button">NEXT</div>
          </a>
        </div>
        <div class="top-menu-content">
          <div class="button">
            <a>CART</a>
          </div>
          <select id="currency" class="button">
            <option value="IDR">IDR</option>
            <option value="USD">USD</option>
          </select>
        </div>
      </div>
    </div>
    <div class="bar">
      <div class="left-bar">
          <nav role="navigation">
              {%- for link in linklists.main-menu.links -%}
                <div class="widget-left-bar">
                  <a href="{{ link.url }}" {% if link.active %}aria-current="page"{% endif %}>
                    <h2>{{ link.title }}</h2>
                  </a>
                  {%- if link.links != blank -%}
                    <ul>
                      {%- for child_link in link.links -%}
                        <li>
                          <a{% if child_link.active %}aria-current="page"{% endif %}>
                            {{ child_link.title }}
                          </a>
                          {%- if child_link.links != blank -%}
                            <ul>
                              {%- for grandchild_link in child_link.links -%}
                                <li>
                                  <a href="{{ grandchild_link.url }}" {% if grandchild_link.active %}aria-current="page"{% endif %}>
                                    {{ grandchild_link.title }}
                                  </a>
                                </li>
                              {%- endfor -%}
                            </ul>
                          {%- endif -%}
                        </li>
                      {%- endfor -%}
                    </ul>
                  {%- endif -%}
                </div>
              {%- endfor -%}
          </nav>
      </div>
      <div class="right-bar border">
        <div class="flex">
          <div class="sub-left-bar">
            <div class="gap-1">
              <img src="{{ featured_image | img_url: 'large' }}" alt="{{ featured_image.alt | escape }}" id="ProductPhotoImg">
              {% for image in product.images %}
                <a href="{{ image.src | img_url: 'large' }}">
                  <img src="{{ image.src | img_url: 'compact' }}" alt="{{ image.alt | escape }}" id="SubProductPhotoImg">
                </a>
              {% endfor %}
            </div>
          </div>
          <div class="sub-right-bar">
            <div class="gap-1">
              <h1>{{ product.title }}</h1>
              <h1>{{ current_variant.price | money }}</h1>
              <div>{{ product.description }}</div>

              <form>
                {% for product_option in product.options_with_values %}
                  {{ product_option.name }}
                  <div class="product-option">
                    {% for value in product_option.values %}
                      <div class="product-variant">
                        <input type="radio" id = "{{ value }}" name="{{ product_option.name}}" value="{{ value }}" class="hide">
                        <label for="{{ value }}">{{ value }}</label>
                      </div>
                    {% endfor %}
                  </div>
                  <br>
                {% endfor %}
                <!--need to show the price here-->
                <input type="number" min="1">
                <button type="submit" id="AddToCart">Add to Cart</button>
              </form>

              {%- comment -%} <form action="/cart/add" method="post" enctype="multipart/form-data" id="AddToCartForm">
                <select name="id" id="productSelect">
                  {% for variant in product.variants %}
                    {% if variant.available %}
                      <input type="button" value="{{ variant.id }}">
                        {{ variant.title }}
                      </input>
                    {% else %}
                      <input type="button" disabled="disabled">
                        {{ variant.title }}
                      </input>
                    {% endif %}
                  {% endfor %}
                </select>
                
                <label for="Quantity">quantity</label>
                <input type="number" id="Quantity" name="quantity" value="1" min="1">
                <button type="submit" name="add" id="AddToCart">ADD TO CART</button>
              </form> {%- endcomment -%}

              {%- comment -%} == Now ==  {%- endcomment -%}
              {%- comment -%} <form action="/cart/add" method="post" enctype="multipart/form-data" id="AddToCartForm">
                <div class="product-option">
                  {% for variant in product.variants %}
                    <div class="product-variant">
                      {% if variant.available %}
                        <span value="{{ variant.id  }}">{{ variant.title }}</span>
                      {% else %}
                        <span disabled="disabled">{{ variant.title }}</span>
                      {% endif %}
                    </div>
                  {% endfor %}
                </div>
                <button type="submit" name="add" id="AddToCart">ADD TO CART</button>
              </form> {%- endcomment -%}

            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<div class="mini-cart-wrap" href="#">
  {% if settings.cart-icon == "cart" %}
    {% include 'icon' with 'cart' %}
  {% else %}
    {% include 'icon' with 'bag' %}
  {% endif %}
  <label><span class="item-count">{{ cart.items.size }}</span> {{ 'layout.header.item_count' | t: count: cart.items.size }}</label>
  <div class="mini-cart {% if shop.customer_accounts_enabled %}account-enabled{% endif %} {% if cart.items.size == 0 %}empty-cart{% endif %}">
    <div class="arrow"></div>
    <div class="mini-cart-items-wrap">

        <p class="no-items">{{ 'layout.header.no_items' | t }}</p>

        {% for item in cart.items %}
        <div id="item-{{ item.id }}" class="item clearfix">
          <div class="image-wrap">
            <img alt="{{ item.product.title }}" src="{{ item | img_url: 'small' }}">
            <a class="{% if settings.product-image-borders %}overlay{% endif %}" href="{{ item.url }}"></a>
          </div>
          <div class="details">
            {% if settings.show-brand-names %}
              <p class="brand">{{ item.vendor | link_to_vendor }}</p>
            {% endif %}
            <p class="title"><a href="{{ item.url }}">{{ item.product.title }}</a><span class="quantity">Ã— <span class="count">{{ item.quantity }}</span></span></p>
            <p class="price"><span class="money">{{ item.line_price | money }}</span></p>
            {% unless item.variant.title == 'Default Title' %}<p class="variant">{{ item.variant.title }}</p>{% endunless %}
            {% if item.properties %}
              {% for property in item.properties %}
                {% unless property.last == blank %}
                  <p class="property">
                    <span class="property-label">{{ property.first }}:</span>
                    {% if property.last contains '/uploads/' %}
                      <a class="property-image" href="{{ property.last }}">{{ property.last | split: '/' | last }}</a>
                    {% else %}
                      <span class="property-value">{{ property.last }}</span>
                    {% endif %}
                  </p>
                {% endunless %}
              {% endfor %}
            {% endif %}
          </div>
        </div>
        {% endfor %}
    </div>
    <div class="options clearfix">
      <a class="action-button view-cart desaturated" href="/cart">{{ 'layout.header.view_cart' | t }}</a>
      <a class="action-button checkout" href="/checkout">{{ 'layout.header.checkout' | t }}</a>
    </div>
  </div>
</div>
